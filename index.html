<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dijital Mektebim | Ã–rnek Ayetler</title>
    <style>
        @font-face { font-family: 'Hamdullah'; src: url('hamdullah.ttf'); }
        :root { --altin: #c5a059; --zemin: #fdfaf5; --kirmizi: #e74c3c; }
        
        body { background-color: #eee; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; font-family: 'Segoe UI', sans-serif; transition: 0.5s; }
        
        .page-container {
            background: #fff; border: 10px solid transparent;
            border-image: url('https://www.transparenttextures.com/patterns/gold-scale.png') 30 stretch;
            outline: 2px solid var(--altin); outline-offset: -7px;
            width: 95%; max-width: 850px; padding: 25px; box-sizing: border-box; text-align: center; position: relative; margin: 15px auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: background-color 0.5s, color 0.5s, outline-color 0.5s;
        }

        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .theme-selector { display: flex; gap: 8px; }
        .theme-dot { width: 22px; height: 22px; border-radius: 50%; cursor: pointer; border: 2px solid #fff; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
        #focusToggle { cursor: pointer; font-size: 26px; user-select: none; }

        .arabic-text { font-family: 'Hamdullah'; font-size: 45px; direction: rtl; line-height: 2.3; margin-bottom: 20px; min-height: 200px; transition: 0.3s; }
        .word { cursor: pointer; padding: 0 5px; transition: 0.2s; display: inline-block; color: #333; }
        .word.active { color: var(--kirmizi) !important; transform: scale(1.1); text-shadow: 0 0 10px rgba(231, 76, 60, 0.3); }

        .control-panel { display: flex; flex-wrap: wrap; align-items: center; justify-content: center; gap: 12px; background: rgba(0,0,0,0.03); padding: 12px; border-radius: 40px; margin-top: 20px; }
        .play-btn { background: var(--altin); color: white; border: none; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; font-size: 18px; }
        .rec-btn { background: var(--kirmizi); color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; font-weight: bold; font-size: 12px; }
        .speed-select { border: 1px solid #ccc; border-radius: 8px; padding: 4px; font-weight: bold; }

        .focus-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); z-index: 998; display: none; pointer-events: none; }
        body.focus-mode .page-container { z-index: 999; background: transparent !important; border: none !important; box-shadow: none !important; outline: none !important; }
        body.focus-mode .word { color: #444; }
        body.focus-mode .word.active { color: #fff !important; text-shadow: 0 0 20px var(--kirmizi); }
        body.focus-mode .header-section, body.focus-mode .nav-arrow, body.focus-mode .ayah-info, body.focus-mode .top-bar { opacity: 0.05; }

        .ayah-slide { display: none; }
        .ayah-slide.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .nav-arrow { font-size: 40px; color: var(--altin); cursor: pointer; position: absolute; top: 50%; transform: translateY(-50%); z-index: 10; user-select: none; }
        .ayah-info { font-size: 13px; color: #888; margin-top: 10px; font-style: italic; }

        @media (max-width: 600px) {
            .arabic-text { font-size: 32px; line-height: 2; }
            .nav-arrow { font-size: 30px; }
        }
    </style>
</head>
<body>

<div class="page-container" id="mainContainer">
    <div class="top-bar">
        <div class="theme-selector">
            <div class="theme-dot" style="background: #fdfaf5;" onclick="changeBg('#fdfaf5')"></div>
            <div class="theme-dot" style="background: #e8f4ea;" onclick="changeBg('#e8f4ea')"></div>
            <div class="theme-dot" style="background: #eef2f7;" onclick="changeBg('#eef2f7')"></div>
            <div class="theme-dot" style="background: #222;" onclick="changeBg('#222')"></div>
        </div>
        <div id="focusToggle" onclick="toggleFocusMode()">ğŸ‘ï¸</div>
    </div>

    <div class="header-section">
        <img src="logo.png" alt="Logo" style="max-width: 70px;">
        <div class="main-title" id="mainTitle" style="font-family:'Hamdullah'; color:var(--altin); font-size:22px;">Dijital Mektebim</div>
    </div>

    <span onclick="changeSlide(-1)" class="nav-arrow" style="left: 5px;">â®</span>
    <span onclick="changeSlide(1)" class="nav-arrow" style="right: 5px;">â¯</span>

<div class="ayah-slide" data-audio="eÃ»zu.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="0.9">Ø§ÙØ¹ÙÙˆØ°Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="0.9" data-end="1.8"> Ø¨ÙØ§ Ù„Ù„Ù‘Ù°Ù‡Ù </span>
               <span class="word" onclick="manualPlay(this)" data-start="1.8" data-end="3.4">Ù…ÙÙ†Ù Ø§Ù„Ø´Ù‘ÙÙŠÙ’Ø·ÙØ§Ù†Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="3.4" data-end="5.8">Ø§Ù„Ø±Ù‘ÙØ¬ÙÙŠÙ…Ù Û </span>
</div>
            <div class="ayah-info">[eÃ»zu]</div>
        </div>

<div class="ayah-slide" data-audio="besmele.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="1.8">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘Ù°Ù‡Ù </span>
                <span class="word" onclick="manualPlay(this)" data-start="1.8" data-end="3.4"> Ø§Ù„Ø±Ù‘ÙØ­Ù’Ù…ÙÙ†Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="3.4" data-end="6.5"> Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠÙ…Ù </span>
</div>
            <div class="ayah-info">[Besmele]</div>
        </div>

<div id="slides">
        <div class="ayah-slide active" data-audio="araf.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="11.08">Ø§Ù„Ù“Ù…Ù“ØµÙ“Ûœ</span>
                <span class="word" onclick="manualPlay(this)" data-start="11.08" data-end="14.04">ÙƒÙØªÙØ§Ø¨ÙŒ</span>
                <span class="word" onclick="manualPlay(this)" data-start="14.04" data-end="15.23">Ø£ÙÙ†Ù’Ø²ÙÙ„Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="15.23" data-end="16.50">Ø¥ÙÙ„ÙÙŠÙ’ÙƒÙ</span>
                <span class="word" onclick="manualPlay(this)" data-start="16.50" data-end="18.40">ÙÙÙ„ÙØ§ ÙŠÙÙƒÙÙ†Ù’</span>
                <span class="word" onclick="manualPlay(this)" data-start="18.40" data-end="20.10">ÙÙÙŠ ØµÙØ¯Ù’Ø±ÙÙƒÙ</span>
                <span class="word" onclick="manualPlay(this)" data-start="20.10" data-end="23.08">Ø­ÙØ±ÙØ¬ÙŒ Ù…ÙÙ†Ù’Ù‡Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="23.08" data-end="31.06">Ù„ÙØªÙÙ†Ù’Ø°ÙØ±Ù Ø¨ÙÙ‡Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="31.06" data-end="33.00">ÙˆÙØ°ÙÙƒÙ’Ø±ÙÙ‰</span>
                <span class="word" onclick="manualPlay(this)" data-start="33.00" data-end="37.00">Ù„ÙÙ„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙŠÙ†Ù Û</span>
            </div>
            <div class="ayah-info">[A'raf; 7/1-2]</div>
        </div>
        <div class="ayah-slide" data-audio="isra.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="1.6">ÙˆÙÙ†ÙÙ†ÙØ²ÙÙ‘Ù„Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="1.6" data-end="3.7">Ù…ÙÙ†Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø§Ù°Ù†Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="3.7" data-end="4.9">Ù…ÙØ§ Ù‡ÙÙˆÙ</span>
                <span class="word" onclick="manualPlay(this)" data-start="4.9" data-end="7.2">Ø´ÙÙÙØ¢Ø¡ÙŒ</span>
                <span class="word" onclick="manualPlay(this)" data-start="7.2" data-end="9.5">ÙˆÙØ±ÙØ­Ù’Ù…ÙØ©ÙŒ</span>
                <span class="word" onclick="manualPlay(this)" data-start="9.5" data-end="13.6">Ù„ÙÙ„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙŠÙ†Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="13.6" data-end="18.1">ÙˆÙÙ„ÙØ§ ÙŠÙØ²ÙÙŠØ¯Ù Ø§Ù„Ø¸ÙÙ‘Ø§Ù„ÙÙ…ÙÙŠÙ†Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="18.1" data-end="20.1">Ø¥ÙÙ„ÙÙ‘Ø§ Ø®ÙØ³ÙØ§Ø±Ù‹Ø§ Û</span>
            </div>
            <div class="ayah-info">[Ä°srÃ¢; 17/82]</div>
        </div>
        <div class="ayah-slide" data-audio="kamer.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="2.5">ÙˆÙÙ„ÙÙ‚ÙØ¯Ù’ ÙŠÙØ³ÙÙ‘Ø±Ù’Ù†ÙØ§</span>
                <span class="word" onclick="manualPlay(this)" data-start="2.5" data-end="4.2">Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø§Ù°Ù†Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="4.2" data-end="5.8">Ù„ÙÙ„Ø°ÙÙ‘ÙƒÙ’Ø±Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="5.8" data-end="9.6">ÙÙÙ‡ÙÙ„Ù’ Ù…ÙÙ†Ù’ Ù…ÙØ¯ÙÙ‘ÙƒÙØ±ÙÛŸ Û</span>
            </div>
            <div class="ayah-info">[Kamer; 54/40]</div>
        </div>
        <div class="ayah-slide" data-audio="necm.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="2.8">ÙˆÙÙ…ÙØ§ ÙŠÙÙ†Ù’Ø·ÙÙ‚Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="2.8" data-end="5.2">Ø¹ÙÙ†Ù Ø§Ù„Ù’Ù‡ÙÙˆÙ°Ù‰ Û</span>
                <span class="word" onclick="manualPlay(this)" data-start="5.2" data-end="7.9">Ø§ÙÙ†Ù’ Ù‡ÙÙˆÙ Ø§ÙÙ„ÙÙ‘Ø§</span>
                <span class="word" onclick="manualPlay(this)" data-start="7.9" data-end="11.0">ÙˆÙØ­Ù’ÙŠÙŒ ÙŠÙÙˆØ­Ù°Ù‰ Û</span>
            </div>
            <div class="ayah-info">[Necm; 53/3-4]</div>
        </div>
        <div class="ayah-slide" data-audio="humeze.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="1.2">ÙˆÙÙŠÙ’Ù„ÙŒ</span>
                <span class="word" onclick="manualPlay(this)" data-start="1.2" data-end="2.7">Ù„ÙÙƒÙÙ„ÙÙ‘</span>
                <span class="word" onclick="manualPlay(this)" data-start="2.7" data-end="4.1">Ù‡ÙÙ…ÙØ²ÙØ©Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="4.1" data-end="5.9">Ù„ÙÙ…ÙØ²ÙØ©Ù Û</span>
            </div>
            <div class="ayah-info">[Humeze; 104/1]</div>
        </div>
        <div class="ayah-slide" data-audio="kaf.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="3.1">Ù‚Ù“</span>
                <span class="word" onclick="manualPlay(this)" data-start="4.3" data-end="8.9">ÙˆÙØ§Ù„Ù’Ù‚ÙØ±Ù’Ø§Ù°Ù†Ù Ø§Ù„Ù’Ù…ÙØ¬ÛªÙŠØ¯Ù Û</span>
            </div>
            <div class="ayah-info">[KÃ¢f; 50/1]</div>
        </div>
        <div class="ayah-slide" data-audio="ibrahim.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="2.2">ÙˆÙØ§ÙÙÙ’Ù€Ø¦ÙØ¯ÙØªÙÙ‡ÙÙ…Ù’</span>
                <span class="word" onclick="manualPlay(this)" data-start="2.2" data-end="5.2">Ù‡ÙÙˆÙÙ“Ø§Ø¡ÙŒ Û</span>
            </div>
            <div class="ayah-info">[Ä°brahim; 14/43]</div>
        </div>
    </div>

    <div class="control-panel">
        <button class="play-btn" id="playBtn" onclick="togglePlay()">â–¶</button>
        <select id="speedRate" class="speed-select" onchange="updateSpeed()">
            <option value="0.75">0.75x</option>
            <option value="1" selected>1.0x</option>
            <option value="1.25">1.25x</option>
        </select>
        <div style="flex-grow: 1; height: 4px; background: #ddd; position: relative; border-radius: 2px;">
            <div id="progressBar" style="width: 0%; height: 100%; background: var(--altin);"></div>
        </div>
        <button class="rec-btn" id="recBtn" onclick="handleRecord()">ğŸ¤ KAYDET</button>
    </div>
    <div id="userAudioArea"></div>
    <audio id="hocaAudio"></audio>
</div>

<script>
    let currentSlide = 0;
    const slides = document.querySelectorAll('.ayah-slide');
    const hoca = document.getElementById('hocaAudio');
    const playBtn = document.getElementById('playBtn');
    let isAuto = false;
    let mediaRecorder;
    let audioChunks = [];

    function init() {
        hoca.src = slides[currentSlide].dataset.audio;
        slides.forEach(s => s.classList.remove('active'));
        slides[currentSlide].classList.add('active');
        playBtn.innerText = "â–¶";
        isAuto = false;
        document.getElementById('progressBar').style.width = "0%";
    }

    function updateSpeed() { hoca.playbackRate = document.getElementById('speedRate').value; }

    function togglePlay() {
        isAuto = true; updateSpeed();
        if(hoca.paused) { hoca.play(); playBtn.innerText = "â¸"; }
        else { hoca.pause(); playBtn.innerText = "â–¶"; }
    }

    function manualPlay(el) {
        isAuto = false; hoca.pause(); updateSpeed();
        hoca.currentTime = parseFloat(el.dataset.start);
        document.querySelectorAll('.word').forEach(w => w.classList.remove('active'));
        el.classList.add('active');
        hoca.play();
        const check = setInterval(() => {
            if (hoca.currentTime >= el.dataset.end) { hoca.pause(); el.classList.remove('active'); clearInterval(check); }
        }, 10);
    }

    hoca.ontimeupdate = () => {
        document.getElementById('progressBar').style.width = (hoca.currentTime / hoca.duration) * 100 + "%";
        if (!isAuto) return;
        const words = slides[currentSlide].querySelectorAll('.word');
        words.forEach(w => {
            const s = parseFloat(w.dataset.start), e = parseFloat(w.dataset.end);
            if (hoca.currentTime >= s && hoca.currentTime < e) w.classList.add('active');
            else w.classList.remove('active');
        });
    };

    function changeSlide(dir) {
        currentSlide = (currentSlide + dir + slides.length) % slides.length;
        init();
    }

    function changeBg(color) {
        const container = document.getElementById('mainContainer');
        const title = document.getElementById('mainTitle');
        const words = document.querySelectorAll('.word');
        container.style.backgroundColor = color;
        if(color === '#222') {
            title.style.color = "#fff";
            words.forEach(w => w.style.color = "#eee");
            container.style.outlineColor = "#444";
        } else {
            title.style.color = "var(--altin)";
            words.forEach(w => w.style.color = "#333");
            container.style.outlineColor = "var(--altin)";
        }
    }

    function toggleFocusMode() {
        const body = document.body;
        const btn = document.getElementById('focusToggle');
        if (!document.querySelector('.focus-overlay')) {
            const div = document.createElement('div');
            div.className = 'focus-overlay';
            document.body.appendChild(div);
        }
        const overlay = document.querySelector('.focus-overlay');
        if (body.classList.contains('focus-mode')) {
            body.classList.remove('focus-mode');
            overlay.style.display = 'none';
            btn.innerText = 'ğŸ‘ï¸';
        } else {
            body.classList.add('focus-mode');
            overlay.style.display = 'block';
            btn.innerText = 'ğŸ™ˆ';
        }
    }

    async function handleRecord() {
        const btn = document.getElementById('recBtn');
        if (mediaRecorder && mediaRecorder.state === "recording") {
            mediaRecorder.stop();
            btn.innerText = "ğŸ¤ KAYDET"; btn.style.background = "var(--kirmizi)";
            return;
        }
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            mediaRecorder = new MediaRecorder(stream);
            audioChunks = [];
            mediaRecorder.ondataavailable = e => audioChunks.push(e.data);
            mediaRecorder.onstop = () => {
                const blob = new Blob(audioChunks, { type: 'audio/wav' });
                const url = URL.createObjectURL(blob);
                document.getElementById('userAudioArea').innerHTML = `<audio controls src="${url}" style="margin-top:10px; width:100%;"></audio>`;
            };
            mediaRecorder.start();
            btn.innerText = "ğŸ›‘ DURDUR"; btn.style.background = "#000";
        } catch (e) { alert("Mikrofon izni gerekli."); }
    }

    init();
</script>
</body>
</html>
