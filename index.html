<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Dijital Mektebim | Ã–rnek Ayetler</title>
    <style>
        @font-face { font-family: 'Hamdullah'; src: url('hamdullah.ttf'); }
        :root { --altin: #c5a059; --zemin: #fdfaf5; --kirmizi: #e74c3c; --gunne: #2ecc71; }
        
        body { background-color: var(--zemin); display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; font-family: 'Segoe UI', sans-serif; }
        
        .page-container {
            background: #fff; border: 10px solid transparent;
            border-image: url('https://www.transparenttextures.com/patterns/gold-scale.png') 30 stretch;
            outline: 2px solid var(--altin); outline-offset: -7px;
            width: 850px; padding: 40px; box-sizing: border-box; text-align: center; position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        .header-section { margin-bottom: 20px; }
        .main-title { font-family: 'Hamdullah'; color: var(--altin); font-size: 26px; margin-top: 10px; }

        .arabic-text { font-family: 'Hamdullah'; font-size: 52px; direction: rtl; line-height: 2.3; margin-bottom: 20px; min-height: 200px; }
        
        /* KELÄ°ME STÄ°LÄ°: RENK KUTUSU KALDIRILDI, SADECE HARF RENGÄ° KIRMIZI */
        .word { cursor: pointer; padding: 0 8px; border-radius: 5px; transition: 0.2s; display: inline-block; color: #333; }
        .word.active { color: var(--kirmizi) !important; transform: scale(1.05); } 
        
        /* TECVÄ°D Ã‡Ä°ZGÄ°LERÄ° (KELÄ°ME ALTINA SIFIRLANDI) */
        .t-gunne { border-bottom: 3px dashed var(--gunne); padding-bottom: 1px; } 
        .t-med { border-bottom: 3px solid var(--kirmizi); padding-bottom: 1px; }

        .tecvid-box { background: #fdf6ec; border-right: 5px solid var(--altin); padding: 15px; margin: 20px 0; font-size: 15px; text-align: right; line-height: 1.6; border-radius: 4px; color: #5d4a26; }
        .ayah-info { font-size: 16px; color: #888; font-style: italic; text-align: left; margin-top: 15px; border-top: 1px solid #eee; padding-top: 10px; }

        /* KONTROL PANELÄ° */
        .control-panel { display: flex; align-items: center; justify-content: center; gap: 15px; background: #f9f9f9; padding: 15px 30px; border-radius: 50px; margin-top: 30px; border: 1px solid #eee; }
        .play-btn { background: var(--altin); color: white; border: none; width: 55px; height: 55px; border-radius: 50%; cursor: pointer; font-size: 24px; transition: 0.3s; }
        .play-btn:hover { transform: scale(1.1); }
        .rec-btn { background: var(--kirmizi); color: white; border: none; padding: 12px 25px; border-radius: 30px; cursor: pointer; font-weight: bold; }
        .speed-select { border: 1px solid #ccc; border-radius: 10px; padding: 5px; cursor: pointer; font-weight: bold; background: white; }

        .ayah-slide { display: none; }
        .ayah-slide.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .nav-arrow { font-size: 45px; color: var(--altin); cursor: pointer; position: absolute; top: 50%; transform: translateY(-50%); transition: 0.3s; user-select: none; }
        .nav-arrow:hover { color: #8e7341; }
/* ODAK MODU STÄ°LLERÄ° */
    .focus-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0, 0, 0, 0.95); z-index: 998;
        display: none; pointer-events: none; transition: 0.5s;
    }
    body.focus-mode .page-container {
        z-index: 999; background: transparent !important; border: none !important; box-shadow: none !important; outline: none !important;
    }
    body.focus-mode .arabic-text { transform: scale(1.15); transition: 0.5s; }
    body.focus-mode .word { color: #444; } /* Pasif kelimeleri karart */
    body.focus-mode .word.active {
        color: #fff !important; text-shadow: 0 0 20px var(--kirmizi); /* Aktif kelime parlasÄ±n */
    }
    body.focus-mode .header-section, body.focus-mode .nav-arrow, body.focus-mode .ayah-info, body.focus-mode .tecvid-box {
        opacity: 0.05; transition: 0.5s;
    }
    </style>
</head>
<body>

<div class="page-container">
<div id="focusToggle" onclick="toggleFocusMode()" style="position: absolute; top: 20px; right: 25px; cursor: pointer; font-size: 30px; z-index: 1001;" title="Odak Modu">ğŸ‘ï¸</div>
    <div class="header-section">
        <img src="logo.png" alt="Logo" style="max-width: 100px; display: block; margin: 0 auto;">
        <div class="main-title">Dijital Mektebim</div>
    </div>

    <span onclick="changeSlide(-1)" class="nav-arrow" style="left: 15px;">â®</span>
    <span onclick="changeSlide(1)" class="nav-arrow" style="right: 15px;">â¯</span>

    <div id="slides">
        <div class="ayah-slide active" data-audio="araf.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="11.08">Ø§Ù„Ù“Ù…Ù“ØµÙ“Ûœ</span>
                <span class="word" onclick="manualPlay(this)" data-start="11.08" data-end="14.04">ÙƒÙØªÙØ§Ø¨ÙŒ</span>
                <span class="word" onclick="manualPlay(this)" data-start="14.04" data-end="15.23">Ø£ÙÙ†Ù’Ø²Ù„Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="15.23" data-end="16.50">Ø¥ÙÙ„ÙÙŠÙ’ÙƒÙ</span>
                <span class="word" onclick="manualPlay(this)" data-start="16.50" data-end="18.40">ÙÙÙ„ÙØ§ ÙŠÙÙƒÙÙ†Ù’</span>
                <span class="word" onclick="manualPlay(this)" data-start="18.40" data-end="20.10">ÙÙÙŠ ØµÙØ¯Ù’Ø±ÙÙƒÙ</span>
                <span class="word" onclick="manualPlay(this)" data-start="20.10" data-end="23.08">Ø­ÙØ±ÙØ¬ÙŒ Ù…ÙÙ†Ù’Ù‡Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="23.08" data-end="31.06">Ù„ÙØªÙÙ†Ù’Ø°ÙØ±Ù Ø¨ÙÙ‡Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="31.06" data-end="33.00">ÙˆÙØ°ÙÙƒÙ’Ø±ÙÙ‰</span>
                <span class="word" onclick="manualPlay(this)" data-start="33.00" data-end="37.00">Ù„ÙÙ„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙŠÙ†Ù Û</span>
            </div>
            <div class="ayah-info">[A'raf; 7/1-2]</div>
        </div>

        <div class="ayah-slide" data-audio="isra.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="1.6">ÙˆÙÙ†ÙÙ†ÙØ²ÙÙ‘Ù„Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="1.6" data-end="3.7">Ù…ÙÙ†Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø§Ù°Ù†Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="3.7" data-end="4.9">Ù…ÙØ§ Ù‡ÙÙˆÙ</span>
                <span class="word" onclick="manualPlay(this)" data-start="4.9" data-end="7.2">Ø´ÙÙÙØ¢Ø¡ÙŒ</span>
                <span class="word" onclick="manualPlay(this)" data-start="7.2" data-end="9.5">ÙˆÙØ±ÙØ­Ù’Ù…ÙØ©ÙŒ</span>
                <span class="word" onclick="manualPlay(this)" data-start="9.5" data-end="13.6">Ù„ÙÙ„Ù’Ù…ÙØ¤Ù’Ù…ÙÙ†ÙÙŠÙ†Ù</span>
               <span class="word" onclick="manualPlay(this)" data-start="13.6" data-end="16.2">ÙˆÙÙ„ÙØ§ ÙŠÙØ²ÙÙŠØ¯Ù</span>
               <span class="word" onclick="manualPlay(this)" data-start="16.2" data-end="18.1">Ø§Ù„Ø¸ÙÙ‘Ø§Ù„ÙÙ…ÙÙŠÙ†Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="18.01" data-end="20.1">Ø¥ÙÙ„ÙÙ‘Ø§ Ø®ÙØ³ÙØ§Ø±Ù‹Ø§ Û</span>
            </div>
            <div class="ayah-info">[Ä°srÃ¢; 17/82]</div>
        </div>

        <div class="ayah-slide" data-audio="kamer.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="1.0">ÙˆÙÙ„ÙÙ‚ÙØ¯Ù’</span>
                <span class="word" onclick="manualPlay(this)" data-start="1.0" data-end="2.5">ÙŠÙØ³ÙÙ‘Ø±Ù’Ù†ÙØ§</span>
                <span class="word" onclick="manualPlay(this)" data-start="2.5" data-end="4.2">Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø§Ù°Ù†Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="4.2" data-end="5.8">Ù„ÙÙ„Ø°ÙÙ‘ÙƒÙ’Ø±Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="5.8" data-end="6.7">ÙÙÙ‡ÙÙ„Ù’</span>
                <span class="word" onclick="manualPlay(this)" data-start="6.7" data-end="9.6">Ù…ÙÙ†Ù’ Ù…ÙØ¯ÙÙ‘ÙƒÙØ±ÙÛŸ Û</span>
                <br>
                <span class="word" onclick="manualPlay(this)" data-start="11.0" data-end="12.0">ÙˆÙÙ„ÙÙ‚ÙØ¯Ù’</span>
                <span class="word" onclick="manualPlay(this)" data-start="12.0" data-end="13.8">Ø¬ÙØ¢Ø¡Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="13.8" data-end="16.1">Ø§Ù°Ù„Ù ÙÙØ±Ù’Ø¹ÙÙˆÙ’Ù†Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="16.1" data-end="17.8">Ø§Ù„Ù†ÙÙ‘Ø°ÙØ± Û</span>
            </div>
            <div class="ayah-info">[Kamer; 54/40-41]</div>
        </div>

        <div class="ayah-slide" data-audio="necm.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="0.8">ÙˆÙÙ…ÙØ§</span>
                <span class="word" onclick="manualPlay(this)" data-start="0.8" data-end="2.8">ÙŠÙÙ†Ù’Ø·ÙÙ‚Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="2.8" data-end="5.2">Ø¹ÙÙ†Ù Ø§Ù„Ù’Ù‡ÙÙˆÙ°Ù‰ Û</span>
                <span class="word" onclick="manualPlay(this)" data-start="5.2" data-end="6.2">Ø§ÙÙ†Ù’</span>
                <span class="word" onclick="manualPlay(this)" data-start="6.2" data-end="6.9">Ù‡ÙÙˆÙ</span>
                <span class="word" onclick="manualPlay(this)" data-start="6.9" data-end="7.9">Ø§ÙÙ„ÙÙ‘Ø§</span>
                <span class="word" onclick="manualPlay(this)" data-start="7.9" data-end="11.0">ÙˆÙØ­Ù’ÙŠÙŒ ÙŠÙÙˆØ­Ù°Ù‰ Û</span>
            </div>
            <div class="ayah-info">[Necm; 53/3-4]</div>
        </div>

        <div class="ayah-slide" data-audio="humeze.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="1.2">ÙˆÙÙŠÙ’Ù„ÙŒ</span>
                <span class="word" onclick="manualPlay(this)" data-start="1.2" data-end="2.7">Ù„ÙÙƒÙÙ„ÙÙ‘</span>
                <span class="word" onclick="manualPlay(this)" data-start="2.7" data-end="4.1">Ù‡ÙÙ…ÙØ²ÙØ©Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="4.1" data-end="5.9">Ù„ÙÙ…ÙØ²ÙØ©Ù Û</span>
            </div>
            <div class="ayah-info">[Humeze; 104/1]</div>
        </div>

        <div class="ayah-slide" data-audio="kaf.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="3.1">Ù‚Ù“</span>
                <span class="word" onclick="manualPlay(this)" data-start="4.3" data-end="6.4">ÙˆÙØ§Ù„Ù’Ù‚ÙØ±Ù’Ø§Ù°Ù†Ù</span>
                <span class="word" onclick="manualPlay(this)" data-start="6.4" data-end="8.9">Ø§Ù„Ù’Ù…ÙØ¬ÛªÙŠØ¯Ù Û</span>
            </div>
            <div class="ayah-info">[KÃ¢f; 50/1]</div>
        </div>

        <div class="ayah-slide" data-audio="ibrahim.mp3">
            <div class="arabic-text">
                <span class="word" onclick="manualPlay(this)" data-start="0" data-end="2.2">ÙˆÙØ§ÙÙÙ’Ù€Ø¦ÙØ¯ÙØªÙÙ‡ÙÙ…Ù’</span>
                <span class="word" onclick="manualPlay(this)" data-start="2.2" data-end="5.2">Ù‡ÙÙˆÙÙ“Ø§Ø¡ÙŒ Û</span>
            </div>
            <div class="ayah-info">[Ä°brahim; 14/43]</div>
        </div>
    </div>

    <div class="control-panel">
        <button class="play-btn" id="playBtn" onclick="togglePlay()">â–¶</button>
        
        <select id="speedRate" class="speed-select" onchange="updateSpeed()">
            <option value="0.5">0.5x</option>
            <option value="0.75">0.75x</option>
            <option value="1" selected>1.0x</option>
        </select>

        <div style="flex-grow: 1; height: 4px; background: #eee; border-radius: 5px; position: relative; overflow: hidden;">
            <div id="progressBar" style="width: 0%; height: 100%; background: var(--altin); transition: 0.1s;"></div>
        </div>

        <button class="rec-btn" id="recBtn" onclick="handleRecord()">ğŸ¤ KAYDET</button>
    </div>
    
    <div id="userAudioArea" style="margin-top: 15px; text-align: center;"></div>
    <audio id="hocaAudio"></audio>
</div>

<script>
    let currentSlide = 0;
    const slides = document.querySelectorAll('.ayah-slide');
    const hoca = document.getElementById('hocaAudio');
    const playBtn = document.getElementById('playBtn');
    let isAuto = false;
    let mediaRecorder;
    let audioChunks = [];

    function init() {
        hoca.src = slides[currentSlide].dataset.audio;
        slides.forEach(s => s.classList.remove('active'));
        slides[currentSlide].classList.add('active');
        playBtn.innerText = "â–¶";
        isAuto = false;
        document.getElementById('progressBar').style.width = "0%";
    }

    function updateSpeed() {
        hoca.playbackRate = document.getElementById('speedRate').value;
    }

    function togglePlay() {
        isAuto = true;
        updateSpeed();
        if(hoca.paused) { hoca.play(); playBtn.innerText = "â¸"; }
        else { hoca.pause(); playBtn.innerText = "â–¶"; }
    }

    function manualPlay(el) {
        isAuto = false;
        hoca.pause();
        updateSpeed();
        // Milimetrik ofset (+0.02)
        hoca.currentTime = parseFloat(el.dataset.start) + 0.02; 
        document.querySelectorAll('.word').forEach(w => w.classList.remove('active'));
        el.classList.add('active');
        hoca.play();

        const check = setInterval(() => {
            if (hoca.currentTime >= el.dataset.end) {
                hoca.pause();
                el.classList.remove('active');
                clearInterval(check);
            }
        }, 10);
    }

    hoca.ontimeupdate = () => {
        const progress = (hoca.currentTime / hoca.duration) * 100;
        document.getElementById('progressBar').style.width = progress + "%";

        if (!isAuto) return;
        const words = slides[currentSlide].querySelectorAll('.word');
        words.forEach(w => {
            const s = parseFloat(w.dataset.start);
            const e = parseFloat(w.dataset.end);
            if (hoca.currentTime >= s && hoca.currentTime < e) w.classList.add('active');
            else w.classList.remove('active');
        });
    };

    async function handleRecord() {
        const btn = document.getElementById('recBtn');
        if (mediaRecorder && mediaRecorder.state === "recording") {
            mediaRecorder.stop();
            btn.innerText = "ğŸ¤ KAYDET";
            btn.style.background = "#e74c3c";
            return;
        }

        try {
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            mediaRecorder = new MediaRecorder(stream);
            audioChunks = [];
            mediaRecorder.ondataavailable = e => audioChunks.push(e.data);
            mediaRecorder.onstop = () => {
                const blob = new Blob(audioChunks, { type: 'audio/wav' });
                const url = URL.createObjectURL(blob);
                const area = document.getElementById('userAudioArea');
                area.innerHTML = `<audio controls src="${url}" style="margin-top:10px;"></audio>`;
            };
            mediaRecorder.start();
            btn.innerText = "ğŸ›‘ DURDUR";
            btn.style.background = "#000";
        } catch (e) {
            alert("Mikrofon izni verilmedi.");
        }
    }

    function changeSlide(dir) {
        currentSlide = (currentSlide + dir + slides.length) % slides.length;
        init();
    }

    init();
function toggleFocusMode() {
        const body = document.body;
        const btn = document.getElementById('focusToggle');
        
        // Overlay yoksa oluÅŸtur
        if (!document.querySelector('.focus-overlay')) {
            const div = document.createElement('div');
            div.className = 'focus-overlay';
            document.body.appendChild(div);
        }

        const overlay = document.querySelector('.focus-overlay');

        if (body.classList.contains('focus-mode')) {
            body.classList.remove('focus-mode');
            overlay.style.display = 'none';
            btn.innerText = 'ğŸ‘ï¸';
        } else {
            body.classList.add('focus-mode');
            overlay.style.display = 'block';
            btn.innerText = 'ğŸ™ˆ';
        }
    }
</script>
</body>
</html>
